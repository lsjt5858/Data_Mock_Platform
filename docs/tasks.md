# 测试数据生成平台 - 任务清单

版本：v0.1  
说明：任务按阶段划分，优先完成 MVP。每项为原子、可验收的开发任务。

---

## 阶段一（MVP：单表生成与导出）

- 后端
  - 初始化 Flask 项目结构（app、routes、services、repos、utils）
  - 集成 CORS 并配置基础中间件（日志、错误处理）
  - 实现 FakerAdapter 与字段类型映射（基础+语义类型）
  - 实现约束校验器（范围、长度、正则、唯一性、空值比例）
  - 实现 DataGenerator：`generate_row`、`generate_batch(count)`、采样预览
  - 实现导出器：CSV/JSON 写出，支持批量与压缩（ZIP 可后置）
  - 实现 `/api/generate`（接收模板/字段，返回数据或采样）
  - 实现 `/api/exports` 与 `/api/exports/{id}/download`（最简）
  - 设计 SQLite 表并实现 TemplateRepo/JobRepo/ExportRepo
  - 编写单元测试（字段映射、约束、导出）

- 前端
  - 初始化 React + AntD 项目结构（pages/components/services）
  - 模板编辑页：字段列表、字段配置表单、规则占位
  - 生成配置页：选择模板、输入数量、触发生成请求
  - 预览&导出页：表格预览、导出格式选择、下载按钮
  - Axios 封装、错误提示与加载状态处理
  - 基础 UI 测试与交互验收

- DevOps/工具
  - 本地运行脚本与环境变量文档（macOS, M 系列）
  - Prettier/ESLint 与 Python 格式（black/isort）建议（可后置）
  - Postman/Thunder Client 集成测试集合

- 验收
  - 单表生成≥10万条（分批）并导出 CSV/JSON
  - 字段约束有效，预览采样正确
  - API 可用，联调通过

---

## 阶段二（扩展：多表关联 + 规则引擎 + 任务）

- 后端
  - RelationResolver：主从表生成顺序与外键引用缓存
  - RuleEngine：表达式解析与校验（布尔+算术），错误日志
  - `/api/datasets`：模板 CRUD，支持版本与复制（clone）
  - `/api/jobs`：提交任务、查询状态、取消/重试
  - 任务进度与日志：速率、剩余时间估算
  - 导出分包与分片；NDJSON 流式导出
  - 源数据管理：`/api/sources`（CSV/JSON），字典引用机制

- 前端
  - 规则编辑器（简版 DSL 文本框/校验提示）
  - 关联关系可视化（字段引用提示/简单依赖图）
  - 任务列表与详情页（进度、日志、操作）
  - 数据源管理页（CSV/JSON 上传与预览）

- 验收
  - 多表（用户-订单-支付）关联生成正确
  - 规则可生效，违规数据拦截或记录
  - 任务调度与进度展示可用

---

## 阶段三（完善：性能优化 + 集成能力 + 权限审计）

- 后端
  - 并发与分片优化，随机种子隔离
  - 对象存储（S3/OSS）导出（可选）
  - Webhook 集成（任务完成通知）
  - 权限模型与审计日志完善
  - 速率限制与输入防护

- 前端
  - 大数据预览分页/虚拟列表（可选）
  - 权限控制与操作审计展示
  - 国际化与设置页面

- 验收
  - 百万级生成与 NDJSON 流式导出稳定
  - 权限与审计生效
  - 集成能力基本可用

---

## 基础里程碑（建议）

- 第 1 周：后端 MVP 完成（/api/generate、CSV/JSON 导出、采样预览）
- 第 2 周：前端 MVP 完成（模板编辑、生成配置、预览与导出）
- 第 3 周：关联与规则、任务管理打底
- 第 4 周：性能优化与导出完善（NDJSON/分片）

---